(global.webpackChunk_N_E=global.webpackChunk_N_E||[]).push([[229],{4378:(t,e,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return n(8282)}])},8282:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>St});var r=n(2050),o=n(4246),i=n(7378),c=n(8038),a=n.n(c),s=n(4426),u=n(9573),l=n(1876),d=n.n(l),f=n(3842),m=n(9312),h=n(6554),g=n(1091),_=n(3645),x=n(3041),p=n(3233),j=n(2375),b=n(2604),v=n(9853),Z=n(3171);const y=function(){var t=u.Z.useToken().token.colorBgContainer,e=s.Z.Sider,n=h.Z.SubMenu,c=h.Z.Item,a=(0,i.useRef)(null),l=(0,r.Z)((0,v.FV)(Z.Tc),2),d=l[0],y=(l[1],[g.Z,_.Z].map((function(t,e){var n=String(e+1);return{key:"sub".concat(n),icon:i.createElement(t),label:0===e?"\uadf8\ub8f9\ucc44\ud305":"1:1 \ucc44\ud305"}}))),k=(0,i.useState)(y),S=k[0],H=(k[1],(0,i.useState)([])),C=H[0],O=H[1],w=(0,i.useState)([]),F=w[0],I=w[1],N=(0,r.Z)((0,v.FV)(Z.ri),2),R=N[0],T=N[1],Y=(0,r.Z)((0,v.FV)(Z.sJ),2),E=(Y[0],Y[1]),M=(0,v.Zl)(Z.ER),U=function(t){t.key&&(M(""),T(t.key),E(t.domEvent.target.innerText))},z=function(t){t.key&&(T(""),M(t.key),E(t.domEvent.target.innerText))};return(0,i.useEffect)((function(){var t=(0,j.IO)((0,j.iH)(b.db,"roomUsers/"+d.uid));(0,j.jM)(t,function(){var t=(0,f.Z)((function(t){var e,n,r;return(0,m.__generator)(this,(function(i){return(e=t.val())?(n=Object.keys(e),r=[],n.map((function(t){r.push({key:t,icon:(0,o.jsx)(x.Z,{}),label:e[t].target})})),O(r)):O([]),[2]}))}));return function(e){return t.apply(this,arguments)}}());var e=(0,j.IO)((0,j.iH)(b.db,"groupUsers/"+d.uid));(0,j.jM)(e,function(){var t=(0,f.Z)((function(t){var e,n,r;return(0,m.__generator)(this,(function(i){return(e=t.val())?(n=Object.keys(e),r=[],n.map((function(t){r.push({key:t,icon:(0,o.jsx)(p.Z,{}),label:e[t].title})})),I(r)):I([]),[2]}))}));return function(e){return t.apply(this,arguments)}}())}),[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(e,{width:200,style:{background:t},children:(0,o.jsx)(h.Z,{theme:"dark",mode:"inline",defaultOpenKeys:["sub1","sub2"],multiple:!0,style:{height:"100%",borderRight:0},ref:a,selectedKeys:[R],children:S&&S.map((function(t,e){return 0===e?(0,o.jsx)(n,{icon:t.icon,title:t.label,children:F&&F.map((function(t){return(0,o.jsx)(c,{onClick:z,icon:t.icon,title:t.label,children:t.label},t.key)}))},t.key):(0,o.jsx)(n,{icon:t.icon,title:t.label,children:C&&C.map((function(t){return(0,o.jsx)(c,{onClick:U,icon:t.icon,title:t.label,children:t.label},t.key)}))},t.key)}))})})})};var k=n(320),S=n(7767),H=n(5633),C=n(6677);const O=function(){var t=(0,C.useRouter)(),e=(0,r.Z)((0,v.FV)(Z.ri),2),n=(e[0],e[1]),i=(0,v.Zl)(Z.ER),c=(0,v.rb)(Z.ri),a=(0,v.rb)(Z.Tc),s=(0,v.rb)(Z.sJ),l=(0,v.rb)(Z.ER),f=(u.Z.useToken().token.colorBgContainer,h.Z.Item);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(h.Z,{className:"".concat(d().home_header),mode:"horizontal",selectable:!1,children:[(0,o.jsx)(f,{translate:"no",children:(0,o.jsx)(k.Z,{placement:"bottom",title:"\ud648",children:(0,o.jsx)(S.Z,{style:{fontSize:20},onClick:function(){n(""),i("")}})})},1),(0,o.jsx)(f,{children:(0,o.jsx)(k.Z,{placement:"bottom",title:"\ub85c\uadf8\uc544\uc6c3",children:(0,o.jsx)(H.Z,{style:{fontSize:20},onClick:function(){b.I.signOut().then((function(){c(),l(),s(),a(),t.replace("login")}))}})})},2)]})})};var w=n(4844),F=n.n(w),I=n(1058),N=n(6423),R=n(6591),T=n(9e3),Y=n(3441),E=n(9314),M=n(3697),U=n(1320),z=n.n(U),D=function(){var t=(0,f.Z)((function(t,e){var n;return(0,m.__generator)(this,(function(r){return n=(new Date).getTime().toString(36),(0,j.t8)((0,j.iH)(b.db,"room/"+n),{user:t.user,regist_date:t.regist_date}),(0,j.t8)((0,j.iH)(b.db,"roomUsers/".concat(e.uid,"/").concat(n)),{target:t.target}),(0,j.t8)((0,j.iH)(b.db,"roomUsers/".concat(t.targetUid,"/").concat(n)),{target:e.nickname}),[2,n]}))}));return function(e,n){return t.apply(this,arguments)}}(),V=function(){var t=(0,f.Z)((function(t){var e,n;return(0,m.__generator)(this,(function(r){return e=(new Date).getTime().toString(36),(0,j.t8)((0,j.iH)(b.db,"groupChat/".concat(e)),{title:t.title,uId:t.uid,regist_date:t.regist_date}),(0,j.t8)((0,j.iH)(b.db,"groupUsers/".concat(t.uid,"/").concat(e)),{title:t.title}),n=(new Date).getTime().toString(36),(0,j.t8)((0,j.iH)(b.db,"message/".concat(e,"/").concat(n)),{msg:"".concat(t.nickname,"\ub2d8\uc774 \ucc38\uac00\ud558\uc168\uc2b5\ub2c8\ub2e4."),name:"",uid:"",regist_date:z()().format("YYYY-MM-DD HH:mm:ss")}),(0,j.t8)((0,j.iH)(b.db,"groupUserList/".concat(e,"/").concat(t.uid)),{nickname:t.nickname}),[2,e]}))}));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=(0,f.Z)((function(t,e){var n;return(0,m.__generator)(this,(function(r){return(0,j.t8)((0,j.iH)(b.db,"groupUsers/".concat(t.uid,"/").concat(e)),{title:t.title}),n=(new Date).getTime().toString(36),(0,j.t8)((0,j.iH)(b.db,"message/".concat(e,"/").concat(n)),{msg:"".concat(t.nickname,"\ub2d8\uc774 \ucc38\uac00\ud558\uc168\uc2b5\ub2c8\ub2e4."),name:"",uid:"",regist_date:z()().format("YYYY-MM-DD HH:mm:ss")}),(0,j.t8)((0,j.iH)(b.db,"groupUserList/".concat(e,"/").concat(t.uid)),{nickname:t.nickname}),[2,e]}))}));return function(e,n){return t.apply(this,arguments)}}(),B=function(t,e,n){if(n){var r=(new Date).getTime().toString(36);(0,j.t8)((0,j.iH)(b.db,"message/".concat(e,"/").concat(r)),{msg:n,name:t.nickname,uid:t.uid,regist_date:z()().format("YYYY-MM-DD HH:mm:ss")})}},J=function(){var t=(0,f.Z)((function(t,e,n){var r;return(0,m.__generator)(this,(function(o){try{(0,j.Od)((0,j.iH)(b.db,"groupUserList/".concat(n,"/").concat(t))).then((function(){(0,j.U2)((0,j.IO)((0,j.iH)(b.db,"groupUserList/".concat(n)))).then((function(e){e.val()?(0,j.U2)((0,j.IO)((0,j.iH)(b.db,"groupChat/".concat(n,"/uId")))).then((function(e){e.val()===t&&(0,j.U2)((0,j.IO)((0,j.iH)(b.db,"groupUserList/".concat(n)),(0,j.Kk)(1))).then((function(t){if(t.val()){var e=Object.keys(t.val()).toString();(0,j.Vx)((0,j.iH)(b.db,"groupChat/".concat(n)),{uId:e})}}))})):((0,j.Od)((0,j.iH)(b.db,"groupChat/".concat(n))),(0,j.Od)((0,j.iH)(b.db,"message/".concat(n))))}))})),(0,j.Od)((0,j.iH)(b.db,"groupUsers/".concat(t,"/").concat(n))),r=(new Date).getTime().toString(36),(0,j.t8)((0,j.iH)(b.db,"message/".concat(n,"/").concat(r)),{msg:"".concat(e,"\ub2d8\uc774 \ud1f4\uc7a5\ud558\uc168\uc2b5\ub2c8\ub2e4."),name:"",uid:"",regist_date:z()().format("YYYY-MM-DD HH:mm:ss")})}catch(i){return[2,!1]}return[2]}))}));return function(e,n,r){return t.apply(this,arguments)}}(),q=function(){var t=(0,f.Z)((function(t,e,n){return(0,m.__generator)(this,(function(r){return(0,j.Od)((0,j.iH)(b.db,"room/".concat(n))),(0,j.Od)((0,j.iH)(b.db,"message/".concat(n))),(0,j.Od)((0,j.iH)(b.db,"roomUsers/".concat(t,"/").concat(n))),(0,j.Od)((0,j.iH)(b.db,"roomUsers/".concat(e,"/").concat(n))),[2]}))}));return function(e,n,r){return t.apply(this,arguments)}}();const A=function(){var t=(0,i.useState)(!1),e=t[0],n=t[1],c=(0,i.useState)(!1),a=c[0],s=c[1],u=(0,i.useState)(""),l=u[0],d=u[1],f=(0,r.Z)(I.ZP.useMessage(),2),m=f[0],h=f[1],g=(0,r.Z)((0,v.FV)(Z.sJ),2),_=(g[0],g[1]),x=(0,r.Z)((0,v.FV)(Z.Tc),2),p=x[0],y=(x[1],(0,v.Zl)(Z.ri)),k=(0,r.Z)((0,v.FV)(Z.ER),2),S=(k[0],k[1]),H=function(){s(!1),d(""),n(!1)},C=function(){if(a&&l){var t=(0,j.IO)((0,j.iH)(b.db,"groupChat"),(0,j.g2)("title"),(0,j.EW)(l));(0,j.U2)(t).then((function(t){if(t)if(t.val())m.open({type:"error",content:"\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uadf8\ub8f9\ucc44\ud305\ubc29 \uc774\ub984\uc785\ub2c8\ub2e4."});else{var e={title:l,nickname:p.nickname,uid:p.uid,regist_date:z()().format("YYYY-MM-DD HH:mm:ss")};V(e).then((function(t){y(""),_(l),S(t)}))}}))}};return(0,o.jsxs)(o.Fragment,{children:[h,(0,o.jsxs)("div",{className:"".concat(F().content_middle," ").concat(F().custom_btn," ").concat(F().btn_1),onClick:function(){s(!1),d(""),n(!0)},children:["\uadf8\ub8f9\ucc44\ud305",(0,o.jsx)("br",{}),"\uc0dd\uc131\ud558\uae30",(0,o.jsx)("div",{className:"".concat(F().content_button_wrap),children:(0,o.jsx)(Y.Z,{})})]}),(0,o.jsx)(N.Z,{open:e,centered:!0,title:"\uadf8\ub8f9\ucc44\ud305\uc744 \uc0dd\uc131\ud574\ubcf4\uc138\uc694!",onOk:H,onCancel:H,footer:[(0,o.jsx)(R.ZP,{type:a?"primary":"default",onClick:C,children:"\uadf8\ub8f9\ucc44\ud305 \uc0dd\uc131\ud558\uae30"},"submit")],width:400,children:(0,o.jsx)(T.Z,{status:a?"":"error",placeholder:"\ucc44\ud305\ubc29 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694 (2~50\uc790 \uc774\ub0b4)",prefix:a?(0,o.jsx)(E.Z,{style:{color:"#52c41a",fontSize:20,marginTop:4,marginBottom:4,marginRight:4}}):(0,o.jsx)(M.Z,{style:{fontSize:20,marginTop:4,marginBottom:4,marginRight:4}}),onChange:function(t){var e=t.currentTarget.value;d(e),!e||e.length<2||e.length>50?s(!1):s(!0)},value:l,onKeyPress:function(t){"Enter"==t.key&&C()},style:{marginTop:8}})})]})};var K=n(6024);const W=function(){var t=(0,i.useState)(!1),e=t[0],n=t[1],c=(0,i.useState)(!1),a=c[0],s=c[1],u=(0,i.useState)(""),l=u[0],d=u[1],h=(0,r.Z)(I.ZP.useMessage(),2),g=h[0],_=h[1],x=(0,r.Z)((0,v.FV)(Z.ri),2),p=(x[0],x[1]),y=(0,r.Z)((0,v.FV)(Z.sJ),2),k=(y[0],y[1]),S=(0,r.Z)((0,v.FV)(Z.Tc),2),H=S[0],C=(S[1],(0,v.Zl)(Z.ER)),O=function(){s(!1),d(""),n(!1)},w=function(){if(a&&l){var t=(0,j.IO)((0,j.iH)(b.db,"users"),(0,j.g2)("email"),(0,j.EW)(l));(0,j.jM)(t,function(){var t=(0,f.Z)((function(t){var e,n,r,o,i;return(0,m.__generator)(this,(function(c){if(e=t.val()){if(n=H.uid,r=Object.keys(e).toString(),n===r)return g.open({type:"error",content:"\ubcf8\uc778\uacfc \ucc44\ud305\ud560 \uc21c \uc5c6\uc2b5\ub2c8\ub2e4."}),[2];(o=[n,r]).sort(),i=(0,j.IO)((0,j.iH)(b.db,"room"),(0,j.g2)("user"),(0,j.EW)("".concat(o[0],"_").concat(o[1]))),(0,j.jM)(i,function(){var t=(0,f.Z)((function(t){var n,r;return(0,m.__generator)(this,(function(i){return n=t.val(),k(e[Object.keys(e).toString()].nickname),n?p(Object.keys(n).toString()):(r={user:"".concat(o[0],"_").concat(o[1]),userNickname:H.nickname,targetUid:Object.keys(e).toString(),target:e[Object.keys(e).toString()].nickname,regist_date:z()().format("YYYY-MM-DD HH:mm:ss")},D(r,H).then((function(t){C(""),p(t)}))),[2]}))}));return function(e){return t.apply(this,arguments)}}(),{onlyOnce:!0})}else g.open({type:"error",content:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ud68c\uc6d0\uc785\ub2c8\ub2e4."});return[2]}))}));return function(e){return t.apply(this,arguments)}}(),{onlyOnce:!0})}};return(0,o.jsxs)(o.Fragment,{children:[_,(0,o.jsxs)("div",{className:"".concat(F().content_middle," ").concat(F().custom_btn," ").concat(F().btn_1),onClick:function(){s(!1),d(""),n(!0)},children:["1:1 \ucc44\ud305",(0,o.jsx)("br",{}),"\uc2dc\uc791\ud558\uae30",(0,o.jsx)("div",{className:"".concat(F().content_button_wrap),children:(0,o.jsx)(K.Z,{})})]}),(0,o.jsx)(N.Z,{open:e,centered:!0,title:"\uce5c\uad6c\uc5d0\uac8c \uba54\uc138\uc9c0\ub97c \ubcf4\ub0b4\ubcf4\uc138\uc694!",onOk:O,onCancel:O,footer:[(0,o.jsx)(R.ZP,{type:a?"primary":"default",onClick:w,children:"\ucc44\ud305 \uc2dc\uc791\ud558\uae30"},"submit")],width:400,children:(0,o.jsx)(T.Z,{status:a?"":"error",placeholder:"\uce5c\uad6c\uc758 \uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",prefix:a?(0,o.jsx)(E.Z,{style:{color:"#52c41a",fontSize:20,marginTop:4,marginBottom:4,marginRight:4}}):(0,o.jsx)(M.Z,{style:{fontSize:20,marginTop:4,marginBottom:4,marginRight:4}}),onChange:function(t){var e=t.currentTarget.value;if(d(e),e){e.match(/^[A-Za-z0-9_\.\-]+@[A-Za-z0-9\-]+\.[A-Za-z0-9\-]+/)?s(!0):s(!1)}else s(!1)},value:l,onKeyPress:function(t){"Enter"==t.key&&w()},style:{marginTop:8}})})]})};var L=n(6907);const Q=function(){var t=(0,i.useState)(!1),e=t[0],n=t[1],c=(0,i.useState)(!1),a=c[0],s=c[1],u=(0,i.useState)(""),l=u[0],d=u[1],f=(0,r.Z)(I.ZP.useMessage(),2),m=f[0],h=f[1],g=(0,r.Z)((0,v.FV)(Z.sJ),2),_=(g[0],g[1]),x=(0,r.Z)((0,v.FV)(Z.Tc),2),p=x[0],y=(x[1],(0,v.Zl)(Z.ri)),k=(0,r.Z)((0,v.FV)(Z.ER),2),S=(k[0],k[1]),H=function(){s(!1),d(""),n(!1)},C=function(){if(a&&l){var t=(0,j.IO)((0,j.iH)(b.db,"groupChat"),(0,j.g2)("title"),(0,j.EW)(l));(0,j.U2)(t).then((function(t){if(t){var e=t.val();if(e){var n=Object.keys(e).toString(),r=(0,j.IO)((0,j.iH)(b.db,"groupUsers/".concat(p.uid,"/").concat(n)));(0,j.U2)(r).then((function(t){if(t.val())y(""),S(n),_(e[n].title);else{var r={title:e[n].title,nickname:p.nickname,regist_date:"",uid:p.uid};P(r,n).then((function(){y(""),_(e[n].title),S(n)}))}}))}else m.open({type:"error",content:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uadf8\ub8f9\ucc44\ud305\ubc29\uc785\ub2c8\ub2e4."})}}))}};return(0,o.jsxs)(o.Fragment,{children:[h,(0,o.jsxs)("div",{className:"".concat(F().content_middle," ").concat(F().custom_btn," ").concat(F().btn_1),onClick:function(){s(!1),d(""),n(!0)},children:["\uadf8\ub8f9\ucc44\ud305",(0,o.jsx)("br",{}),"\ucc38\uac00\ud558\uae30",(0,o.jsx)("div",{className:"".concat(F().content_button_wrap),children:(0,o.jsx)(L.Z,{})})]}),(0,o.jsx)(N.Z,{open:e,centered:!0,title:"\uadf8\ub8f9\ucc44\ud305\uc5d0 \ucc38\uac00\ud574\ubcf4\uc138\uc694!",onOk:H,onCancel:H,footer:[(0,o.jsx)(R.ZP,{type:a?"primary":"default",onClick:C,children:"\uadf8\ub8f9\ucc44\ud305 \ucc38\uac00\ud558\uae30"},"submit")],width:400,children:(0,o.jsx)(T.Z,{status:a?"":"error",placeholder:"\ucc44\ud305\ubc29 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",prefix:a?(0,o.jsx)(E.Z,{style:{color:"#52c41a",fontSize:20,marginTop:4,marginBottom:4,marginRight:4}}):(0,o.jsx)(M.Z,{style:{fontSize:20,marginTop:4,marginBottom:4,marginRight:4}}),onChange:function(t){var e=t.currentTarget.value;d(e),s(!!e)},value:l,onKeyPress:function(t){"Enter"==t.key&&C()},style:{marginTop:8}})})]})};const G=function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"".concat(F().content_title),children:(0,o.jsx)("span",{children:"Nextron\uacfc firebase\ub97c \uc774\uc6a9\ud574 \ub9cc\ub4e0 \ucc44\ud305 \uc571\uc785\ub2c8\ub2e4."})}),(0,o.jsxs)("div",{className:"".concat(F().content_start),children:[(0,o.jsx)(A,{}),(0,o.jsx)(Q,{}),(0,o.jsx)(W,{})]})]})};var X=n(5034),$=n(3444),tt=n(9406),et=n(8069),nt=n(3301),rt=n(2092),ot=n(1174),it=n(3073),ct=n(1246),at=n.n(ct),st=n(5260);const ut=function(t){var e=t,n=(0,r.Z)((0,v.FV)(Z.Tc),2),i=n[0],c=(n[1],i.uid===e.uid);return(0,o.jsxs)("div",{className:"".concat(at().m_box_wrap," ").concat(c?at().left_box:""),children:[c&&(0,o.jsx)("span",{className:"".concat(at().msg_box_time),children:z()(e.regist_date).format("HH:mm")}),t.group?(0,o.jsxs)("div",{className:"".concat(c?at().ta_r:at().ta_l),children:[(0,o.jsxs)("div",{style:{fontSize:16,padding:"0 13px"},children:[(0,o.jsx)(et.C,{className:"".concat(t.orner?at().orner_color:""),size:20,icon:t.orner?(0,o.jsx)(st.Z,{}):(0,o.jsx)(x.Z,{}),style:{marginRight:5,fontSize:16}}),e.name]}),(0,o.jsx)("div",{className:"".concat(at().m_box," ").concat(c?at().login_user_box:""),children:(0,o.jsx)("span",{children:e.msg})})]}):(0,o.jsx)("div",{className:"".concat(at().m_box," ").concat(c?at().login_user_box:""),children:(0,o.jsx)("span",{children:e.msg})}),i.uid!==e.uid&&(0,o.jsx)("span",{className:"".concat(at().msg_box_time),children:z()(e.regist_date).format("HH:mm")})]})};const lt=function(t){var e=t.date;return(0,o.jsx)("div",{className:"".concat(at().time_box_wrap),children:(0,o.jsx)("span",{className:"".concat(at().time_box),children:e})})};var dt=s.Z.Header,ft=s.Z.Footer,mt=s.Z.Content,ht=T.Z.Search;const gt=function(){var t=(0,i.useState)([]),e=t[0],n=t[1],c=(0,i.useState)(null),a=c[0],u=c[1],l=(0,i.useState)(null),d=l[0],h=l[1],g=(0,r.Z)((0,v.FV)(Z.ri),2),_=g[0],p=g[1],y=(0,r.Z)((0,v.FV)(Z.sJ),2),k=y[0],S=y[1],H=(0,r.Z)((0,v.FV)(Z.ER),2),C=(H[0],H[1]),O=(0,r.Z)((0,v.FV)(Z.Tc),2),w=O[0],F=(O[1],(0,i.useState)("")),I=F[0],T=F[1],Y=(0,i.useState)(!1),E=Y[0],M=Y[1],U=(0,r.Z)(N.Z.useModal(),2),D=U[0],V=U[1],P=(0,i.useState)([]),J=P[0],A=P[1],K=!0,W="",L=(0,i.useRef)(null),Q=(0,i.useCallback)((function(){L.current.scrollIntoView({block:"end",inline:"nearest"})}),[]),G={title:"\ucc44\ud305\ubc29\uc5d0\uc11c \ud1f4\uc7a5\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",content:(0,o.jsx)(o.Fragment,{children:"\ud1f4\uc7a5 \uc2dc \ud574\ub2f9 \uc0ac\uc6a9\uc790\uc640\uc758 \uba54\uc138\uc9c0\ub294 \uc0ad\uc81c\ub429\ub2c8\ub2e4."}),centered:!0,onOk:function(){d&&(0,j.S1)(d),q(J[0].uid,J[1].uid,_).then((function(){S(""),p(""),C("")}))}};return(0,i.useEffect)((function(){if(n([]),A([]),_){(0,j.U2)((0,j.IO)((0,j.iH)(b.db,"room/".concat(_,"/user")))).then((function(t){if(t.val()){t.val().toString();t.val().split("_").map((function(t,e){(0,j.U2)((0,j.IO)((0,j.iH)(b.db,"users/".concat(t,"/nickname")))).then((function(e){e.val()&&A((function(n){return(0,$.Z)(n).concat([{uid:t,nickname:e.val().toString()}])}))}))}))}})),K=!0,a&&(0,j.S1)(a);var t=(0,j.iH)(b.db,"message/".concat(_)),e=(0,j.IO)(t);(0,j.U2)(e).then((function(e){if(e&&e.val()){var r=e.val(),o=Object.keys(r),i=[];o.map((function(t,e){i.push((0,X.Z)({mid:t},r[t]))})),n(i)}var c=(0,j.IO)(t,(0,j.vh)(1));u(c),(0,j.jM)(c,function(){var t=(0,f.Z)((function(t){var e;return(0,m.__generator)(this,(function(r){return K?(K=!1,[2]):(t&&t.val()&&(e=t.val(),n((function(t){return(0,$.Z)(t).concat([(0,X.Z)({mid:Object.keys(e).toString()},e[Object.keys(e).toString()])])}))),[2])}))}));return function(e){return t.apply(this,arguments)}}()),d&&(0,j.S1)(d);var a=(0,j.IO)((0,j.iH)(b.db,"room/".concat(_)));h(a),(0,j.jM)(a,(function(t){t.val()||N.Z.warning({title:"\ub300\ud654 \uc0c1\ub300\uac00 \ud1f4\uc7a5\ud558\uc600\uc2b5\ub2c8\ub2e4.",centered:!0,onOk:function(){S(""),p("")}})}))}))}}),[_]),(0,i.useEffect)((function(){Q()}),[e]),(0,o.jsxs)(o.Fragment,{children:[V,(0,o.jsxs)(s.Z,{style:{height:"100%"},children:[(0,o.jsx)(tt.Z,{title:"\ucc38\uc5ec\uc790 \ubaa9\ub85d",placement:"right",onClose:function(){M(!1)},open:E,width:300,children:(0,o.jsxs)(s.Z,{style:{height:"100%",background:"#fff"},children:[(0,o.jsx)(mt,{children:J&&J.map((function(t,e){return(0,o.jsx)("div",{style:{fontSize:19,padding:"0 13px",marginBottom:10,display:"flex",flexDirection:"row",justifyContent:"space-between"},children:(0,o.jsxs)("div",{children:[(0,o.jsx)(et.C,{size:26,icon:(0,o.jsx)(x.Z,{}),style:{marginRight:5,fontSize:21}}),t.nickname]})},t.uid)}))}),(0,o.jsx)(ft,{style:{padding:0},children:(0,o.jsx)(R.ZP,{icon:(0,o.jsx)(nt.Z,{}),style:{height:45,width:"100%",fontSize:20,padding:0},onClick:function(){D.confirm(G)},children:"\ub098\uac00\uae30"})})]})}),(0,o.jsxs)(dt,{style:{textAlign:"center",color:"#000",height:64,paddingInline:15,lineHeight:"64px",backgroundColor:"#fff",fontWeight:600,fontSize:20,position:"relative"},children:[(0,o.jsx)(R.ZP,{onClick:function(){M(!E)},style:{position:"absolute",top:16,left:25,backgroundColor:"#ffffff",border:"1px solid #000c17",color:"#000c17"},children:E?(0,o.jsx)(rt.Z,{}):(0,o.jsx)(ot.Z,{})}),k,"\ub2d8 \uacfc\uc758 \ub300\ud654\ubc29"]}),(0,o.jsx)(mt,{className:"".concat(at().chat_content),children:(0,o.jsx)("div",{className:"".concat(at().message_box_wrap),ref:L,children:e&&e.map((function(t,e){var n=z()(t.regist_date).format("YYYY\ub144 M\uc6d4 D\uc77c"),r=W!==n;return r&&(W=n),(0,o.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:[r&&(0,o.jsx)(lt,{date:n}),(0,o.jsx)(ut,(0,X.Z)({},t))]},t.mid)}))})}),(0,o.jsx)(ft,{style:{padding:"10px 20px",textAlign:"center",color:"#fff",backgroundColor:"#fff",height:60},children:(0,o.jsx)(ht,{placeholder:"\uba54\uc138\uc9c0\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694",allowClear:!0,enterButton:(0,o.jsx)(it.Z,{}),size:"large",onSearch:function(){I&&(Q(),B(w,_,I),T(""))},value:I,onChange:function(t){T(t.currentTarget.value)}})})]})]})};var _t=n(6472);const xt=function(t){var e=t.msg;return(0,o.jsx)("div",{className:"".concat(at().time_box_wrap),style:{height:60},children:(0,o.jsx)("span",{className:"".concat(at().time_box),children:e})})};var pt=s.Z.Header,jt=s.Z.Footer,bt=s.Z.Content,vt=T.Z.Search;const Zt=function(){var t=(0,i.useState)([]),e=t[0],n=t[1],c=(0,i.useState)(),a=c[0],u=c[1],l=(0,i.useState)(null),d=l[0],h=l[1],g=(0,i.useState)(null),_=g[0],p=g[1],y=(0,i.useState)(null),S=y[0],H=y[1],C=(0,r.Z)((0,v.FV)(Z.ri),2),O=(C[0],C[1]),w=(0,r.Z)((0,v.FV)(Z.ER),2),F=w[0],T=w[1],Y=(0,r.Z)((0,v.FV)(Z.sJ),2),E=Y[0],M=Y[1],U=(0,r.Z)((0,v.FV)(Z.Tc),2),V=U[0],P=(U[1],(0,i.useState)("")),q=P[0],A=P[1],K=(0,i.useState)(""),W=K[0],L=K[1],Q=(0,r.Z)(I.ZP.useMessage(),2),G=(Q[0],Q[1]),ct=(0,r.Z)(N.Z.useModal(),2),dt=ct[0],ft=ct[1],mt=!0,ht="",gt=(0,i.useRef)(null),Zt=(0,i.useState)(!1),yt=Zt[0],kt=Zt[1],St=(0,i.useCallback)((function(){gt.current.scrollIntoView({block:"end",inline:"nearest"})}),[]),Ht={title:"".concat(E," \uadf8\ub8f9\ucc44\ud305\uc5d0\uc11c \ud1f4\uc7a5\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"),content:(0,o.jsxs)(o.Fragment,{children:["\ucc38\uc5ec\uc790\uac00 \uc5c6\ub294 \uacbd\uc6b0",(0,o.jsx)("br",{}),"\uadf8\ub8f9\ucc44\ud305\uacfc \uba54\uc138\uc9c0\ub294 \uc0ad\uc81c\ub429\ub2c8\ub2e4."]}),centered:!0,onOk:function(){Ct()}},Ct=function(){J(V.uid,V.nickname,F).then((function(t){T(""),O(""),M("")}))};return(0,i.useEffect)((function(){if(n([]),F){S&&(0,j.S1)(S);var t=(0,j.iH)(b.db,"groupChat/".concat(F)),e=(0,j.IO)(t);H(e),(0,j.jM)(e,function(){var t=(0,f.Z)((function(t){var e;return(0,m.__generator)(this,(function(n){return(e=t.val())&&L(e.uId),[2]}))}));return function(e){return t.apply(this,arguments)}}()),mt=!0,d&&(0,j.S1)(d),_&&(0,j.S1)(_);var r=(0,j.iH)(b.db,"message/".concat(F)),o=(0,j.IO)(r);(0,j.U2)(o).then((function(t){if(t&&t.val()){var e=t.val(),o=Object.keys(e),i=[];o.map((function(t,n){i.push((0,X.Z)({mid:t},e[t]))})),n(i)}var c=(0,j.IO)(r,(0,j.vh)(1));h(c),(0,j.jM)(c,function(){var t=(0,f.Z)((function(t){var e;return(0,m.__generator)(this,(function(r){return mt?(mt=!1,[2]):(t&&t.val()&&(e=t.val(),n((function(t){return(0,$.Z)(t).concat([(0,X.Z)({mid:Object.keys(e).toString()},e[Object.keys(e).toString()])])}))),[2])}))}));return function(e){return t.apply(this,arguments)}}())}));var i=(0,j.iH)(b.db,"groupUserList/".concat(F)),c=(0,j.IO)(i);p(c),(0,j.jM)(c,function(){var t=(0,f.Z)((function(t){var e,n,r;return(0,m.__generator)(this,(function(o){return(e=t.val())?(n=Object.keys(e),r=[],n.map((function(t,n){r.push({uid:t,nickname:e[t].nickname})})),u(r)):u([]),[2]}))}));return function(e){return t.apply(this,arguments)}}())}}),[F]),(0,i.useEffect)((function(){St()}),[e]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(s.Z,{style:{height:"100%"},children:[G,ft,(0,o.jsx)(tt.Z,{title:"\ucc38\uc5ec\uc790 \ubaa9\ub85d",placement:"right",onClose:function(){kt(!1)},open:yt,width:300,children:(0,o.jsxs)(s.Z,{style:{height:"100%",background:"#fff"},children:[(0,o.jsx)(bt,{children:a&&a.map((function(t,e){return(0,o.jsxs)("div",{style:{fontSize:19,padding:"0 13px",marginBottom:10,display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(et.C,{className:"".concat(W===t.uid?at().orner_color:""),size:26,icon:W===t.uid?(0,o.jsx)(st.Z,{}):(0,o.jsx)(x.Z,{}),style:{marginRight:5,fontSize:21}}),t.nickname]}),t.uid!==V.uid&&(0,o.jsx)("div",{children:(0,o.jsx)(k.Z,{placement:"bottomRight",title:"1:1 \ucc44\ud305\ubcf4\ub0b4\uae30",children:(0,o.jsx)(_t.Z,{style:{fontSize:20,cursor:"pointer"},onClick:function(){return function(t){var e=[V.uid,t.uid];e.sort();var n=(0,j.IO)((0,j.iH)(b.db,"room"),(0,j.g2)("user"),(0,j.EW)("".concat(e[0],"_").concat(e[1])));(0,j.U2)(n).then(function(){var n=(0,f.Z)((function(n){var r,o;return(0,m.__generator)(this,(function(i){return r=n.val(),M(t.nickname),r?O(Object.keys(r).toString()):(o={user:"".concat(e[0],"_").concat(e[1]),userNickname:V.nickname,targetUid:t.uid,target:t.nickname,regist_date:z()().format("YYYY-MM-DD HH:mm:ss")},D(o,V).then((function(t){T(""),O(t)}))),[2]}))}));return function(t){return n.apply(this,arguments)}}())}(t)}})})})]},t.uid)}))}),(0,o.jsx)(jt,{style:{padding:0},children:(0,o.jsx)(R.ZP,{icon:(0,o.jsx)(nt.Z,{}),style:{height:45,width:"100%",fontSize:20,padding:0},onClick:function(){dt.confirm(Ht)},children:"\ub098\uac00\uae30"})})]})}),(0,o.jsxs)(pt,{style:{textAlign:"center",color:"#000",height:64,paddingInline:15,lineHeight:"64px",backgroundColor:"#fff",fontWeight:600,fontSize:20,position:"relative"},children:[(0,o.jsx)(R.ZP,{onClick:function(){kt(!yt)},style:{position:"absolute",top:16,left:25,backgroundColor:"#ffffff",border:"1px solid #000c17",color:"#000c17"},children:yt?(0,o.jsx)(rt.Z,{}):(0,o.jsx)(ot.Z,{})}),E," [\uadf8\ub8f9\ucc44\ud305]"]}),(0,o.jsx)(bt,{className:"".concat(at().chat_content),children:(0,o.jsx)("div",{className:"".concat(at().message_box_wrap),ref:gt,children:e&&e.map((function(t,e){var n=z()(t.regist_date).format("YYYY\ub144 M\uc6d4 D\uc77c"),r=ht!==n;return r&&(ht=n),(0,o.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:[r&&(0,o.jsx)(lt,{date:n}),t.uid?(0,o.jsx)(ut,(0,X.Z)({orner:W===t.uid,group:!0},t)):(0,o.jsx)(xt,{msg:t.msg})]},t.mid)}))})}),(0,o.jsx)(jt,{style:{padding:"10px 20px",textAlign:"center",color:"#fff",backgroundColor:"#fff",height:60},children:(0,o.jsx)(vt,{placeholder:"\uba54\uc138\uc9c0\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694",allowClear:!0,enterButton:(0,o.jsx)(it.Z,{}),size:"large",onSearch:function(){q&&(St(),B(V,F,q),A(""))},value:q,onChange:function(t){A(t.currentTarget.value)}})})]})})};var yt=s.Z.Header,kt=s.Z.Content;const St=function(){var t=u.Z.useToken().token,e=t.colorBgContainer,n=t.fontFamily,c=(0,C.useRouter)(),l=(0,v.sJ)(Z.Tc),f=(0,r.Z)((0,v.FV)(Z.ri),2),m=f[0],h=(f[1],(0,v.sJ)(Z.ER)),g=(0,v.rb)(Z.Bt);return(0,i.useEffect)((function(){l.uid||c.replace("/login")}),[]),(0,i.useEffect)((function(){g()}),[m]),(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(a(),{children:(0,o.jsx)("title",{children:"Nextron Chatting App"})}),(0,o.jsxs)(s.Z,{className:"".concat(d().home_section),children:[(0,o.jsx)(y,{}),(0,o.jsxs)(s.Z,{children:[(0,o.jsx)(yt,{className:"header",style:{padding:"0 24px",margin:0,background:e,fontFamily:n},children:(0,o.jsx)(O,{})}),(0,o.jsx)(kt,{style:{margin:0,minHeight:280,background:e,position:"relative",overflowX:"hidden"},children:m||h?m?(0,o.jsx)(gt,{}):(0,o.jsx)(Zt,{}):(0,o.jsx)(G,{})})]})]})]})}},3171:(t,e,n)=>{"use strict";n.d(e,{Bt:()=>s,ER:()=>u,Tc:()=>a,ri:()=>i,sJ:()=>c});var r=n(9853),o=n(9224),i=(0,r.cn)({key:"roomId/".concat((0,o.Z)()),default:""}),c=(0,r.cn)({key:"roomTarget/".concat((0,o.Z)()),default:""}),a=(0,r.cn)({key:"user/".concat((0,o.Z)()),default:{uid:"",email:"",nickname:""}}),s=(0,r.cn)({key:"roomDate/".concat((0,o.Z)()),default:""}),u=(0,r.cn)({key:"groupId/".concat((0,o.Z)()),default:""})},1246:t=>{t.exports={chat_content:"chatRoom_chat_content__tN_Wz",message_box_wrap:"chatRoom_message_box_wrap__Ovls_",m_box_wrap:"chatRoom_m_box_wrap__185fJ",m_box:"chatRoom_m_box__KQ0Sc",msg_box_time:"chatRoom_msg_box_time__qPLWi",left_box:"chatRoom_left_box__SK1Vw",time_box_wrap:"chatRoom_time_box_wrap__GfUlh",time_box:"chatRoom_time_box__4OUAr",ta_r:"chatRoom_ta_r__tu_RK",ta_l:"chatRoom_ta_l__oSC4_",orner_color:"chatRoom_orner_color__fEtqH",login_user_box:"chatRoom_login_user_box__NiOF3"}},1876:t=>{t.exports={home_section:"home_home_section__cD6lE",home_header:"home_home_header__e6yo4"}},4844:t=>{t.exports={content_title:"homeContent_content_title__eJu1m",content_start:"homeContent_content_start__BUbcl",content_middle:"homeContent_content_middle__cpITn",custom_btn:"homeContent_custom_btn__Wj4MC",btn_1:"homeContent_btn_1__WIFl_",content_button_wrap:"homeContent_content_button_wrap__jKq_0",content_button:"homeContent_content_button__dLSNQ"}},2604:(t,e,n)=>{"use strict";n.d(e,{I:()=>u,db:()=>s});var r=n(880),o=n(8662),i=n(2375);const c={apiKey:"AIzaSyAftjPZ4MSu7EAVeQvbSHPHuaaQhJ3JQL4",authDomain:"tokyo-ring-376315.firebaseapp.com",projectId:"tokyo-ring-376315",storageBucket:"tokyo-ring-376315.appspot.com",messagingSenderId:"400820874062",appId:"1:400820874062:web:b196995c4e3ed323a2cc1f",measurementId:"G-6HVY02PMG1"},a=r.ZF(c),s=(0,i.N8)(a),u=(0,o.v0)()},9491:t=>{"use strict";t.exports=require("assert")},4300:t=>{"use strict";t.exports=require("buffer")},6113:t=>{"use strict";t.exports=require("crypto")},2361:t=>{"use strict";t.exports=require("events")},1808:t=>{"use strict";t.exports=require("net")},2781:t=>{"use strict";t.exports=require("stream")},4404:t=>{"use strict";t.exports=require("tls")},7310:t=>{"use strict";t.exports=require("url")},3837:t=>{"use strict";t.exports=require("util")}},t=>{t.O(0,[195,678,259,598,714,774,888,179],(()=>{return e=4378,t(t.s=e);var e}));var e=t.O();_N_E=e}]);